(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"0119":function(e,t,n){"use strict";n("c20b")},1865:function(e,t,n){"use strict";n("6af2")},"498a":function(e,t,n){"use strict";var r=n("23e7"),c=n("58a8").trim,a=n("c8d2");r({target:"String",proto:!0,forced:a("trim")},{trim:function(){return c(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),c=n("5899"),a="["+c+"]",o=RegExp("^"+a+a+"*"),i=RegExp(a+a+"*$"),u=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(i,"")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},"6af2":function(e,t,n){},7277:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),c={class:"dashboard"},a=Object(r["g"])("h1",null,"Dashboard",-1);function o(e,t,n,o,i,u){var s=Object(r["u"])("Signout"),d=Object(r["u"])("ChangesList");return Object(r["p"])(),Object(r["d"])("div",c,[a,Object(r["g"])(s),Object(r["g"])(d)])}n("5319"),n("ac1f");var i={class:"signout"},u={key:0,class:"alert alert-danger"};function s(e,t,n,c,a,o){return Object(r["p"])(),Object(r["d"])("div",i,[a.error?(Object(r["p"])(),Object(r["d"])("div",u,Object(r["x"])(a.error),1)):Object(r["e"])("",!0),Object(r["g"])("button",{onClick:t[1]||(t[1]=function(){return o.signOut&&o.signOut.apply(o,arguments)})},"Sign out")])}var d={name:"Signout",data:function(){return{error:""}},created:function(){this.error=""},methods:{signOut:function(){var e=this;this.$http.secured.delete("/signin").then((function(){delete localStorage.csrf,delete localStorage.signedIn,e.$router.replace("/")})).catch((function(t){return e.setError(t,"Cannot sign out")}))},setError:function(e,t){this.error=e.response&&e.response.data&&e.response.data.error||t}}};d.render=s;var h=d,l={class:"changes"},g={key:0,class:"alert alert-danger"},f=Object(r["g"])("h3",null,"Recent changes",-1),p=Object(r["g"])("br",null,null,-1),b={class:"list-group"};function O(e,t,n,c,a,o){var i=Object(r["v"])("change-focus");return Object(r["p"])(),Object(r["d"])("div",l,[a.error?(Object(r["p"])(),Object(r["d"])("div",g,Object(r["x"])(a.error),1)):Object(r["e"])("",!0),f,Object(r["D"])(Object(r["g"])("input",{class:"form-control",autofocus:"",autocomplete:"off",placeholder:"What is the status?","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.newChange=e}),onKeyup:t[2]||(t[2]=Object(r["E"])((function(){return o.addChange&&o.addChange.apply(o,arguments)}),["enter"]))},null,544),[[r["z"],a.newChange]]),p,Object(r["g"])("ul",b,[(Object(r["p"])(!0),Object(r["d"])(r["a"],null,Object(r["t"])(a.changes,(function(e){return Object(r["p"])(),Object(r["d"])("li",{class:"list-group-item",key:e.id,change:e},[Object(r["D"])(Object(r["g"])("div",{onDblclick:function(t){return o.editChange(e)}},[Object(r["g"])("label",null,Object(r["x"])(e.status)+" by "+Object(r["x"])(e.user_id)+" on "+Object(r["x"])(e.created_at),1),Object(r["g"])("i",{class:"fa fa-trash-alt",onClick:function(t){return o.removeChange(e)}},null,8,["onClick"])],40,["onDblclick"]),[[r["A"],e!=a.editedChange]]),Object(r["D"])(Object(r["g"])("div",null,[Object(r["D"])(Object(r["g"])("input",{class:"form-control",onBlur:function(t){return o.updateChange(e)},onKeyup:Object(r["E"])((function(t){return o.updateChange(e)}),["enter"]),"onUpdate:modelValue":function(t){return e.status=t}},null,40,["onBlur","onKeyup","onUpdate:modelValue"]),[[i],[r["z"],e.status]])],512),[[r["A"],e==a.editedChange]])],8,["change"])})),128))])])}n("498a"),n("a434");var j={name:"List",data:function(){return{changes:[],newChange:[],error:"",editedChange:""}},created:function(){var e=this;localStorage.signedIn?this.$http.secured.get("/changes").then((function(t){e.changes=t.data})).catch((function(t){return e.setError(t,"Something went wrong")})):this.$router.replace("/")},methods:{setError:function(e,t){this.error=e.response&&e.response.data&&e.response.data.error||t},addChange:function(){var e=this,t=this.newChange&&this.newChange.trim();t&&this.$http.secured.post("/changes",{change:{status:this.newChange}}).then((function(t){e.changes.push(t.data),e.newChange=""})).catch((function(t){return e.setError(t,"Cannot create change")}))},removeChange:function(e){var t=this;this.$http.secured.delete("/changes/".concat(e.id)).then((function(){t.changes.splice(t.changes.indexOf(e),1)})).catch((function(e){return t.setError(e,"Cannot delete change")}))},editChange:function(e){this.editedChange=e},updateChange:function(e){var t=this;this.editedChange="",this.$http.secured.patch("/changes/".concat(e.id),{change:{status:e.status}}).catch((function(e){return t.setError(e,"Cannot update change")}))}},directives:{"change-focus":function(e){e.focus()}}};n("0119");j.render=O;var v=j,C={name:"Dashboard",components:{ChangesList:v,Signout:h},data:function(){return{}},created:function(){localStorage.signedIn||this.$router.replace("/")},methods:{}};n("1865");C.render=o;t["default"]=C},a434:function(e,t,n){"use strict";var r=n("23e7"),c=n("23cb"),a=n("a691"),o=n("50c4"),i=n("7b0b"),u=n("65f0"),s=n("8418"),d=n("1dde"),h=d("splice"),l=Math.max,g=Math.min,f=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var n,r,d,h,b,O,j=i(this),v=o(j.length),C=c(e,v),m=arguments.length;if(0===m?n=r=0:1===m?(n=0,r=v-C):(n=m-2,r=g(l(a(t),0),v-C)),v+n-r>f)throw TypeError(p);for(d=u(j,r),h=0;h<r;h++)b=C+h,b in j&&s(d,h,j[b]);if(d.length=r,n<r){for(h=C;h<v-r;h++)b=h+r,O=h+n,b in j?j[O]=j[b]:delete j[O];for(h=v;h>v-r+n;h--)delete j[h-1]}else if(n>r)for(h=v-r;h>C;h--)b=h+r-1,O=h+n-1,b in j?j[O]=j[b]:delete j[O];for(h=0;h<n;h++)j[h+C]=arguments[h+2];return j.length=v-r+n,d}})},c20b:function(e,t,n){},c8d2:function(e,t,n){var r=n("d039"),c=n("5899"),a="​᠎";e.exports=function(e){return r((function(){return!!c[e]()||a[e]()!=a||c[e].name!==e}))}}}]);
//# sourceMappingURL=dashboard.147b9def.js.map